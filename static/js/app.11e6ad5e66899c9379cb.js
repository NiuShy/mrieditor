webpackJsonp([2],{"1pTi":function(t,e){},"5W1q":function(t,e){},NHnr:function(t,e,i){"use strict";function n(t){i("cFgJ")}function a(t){i("1pTi")}function s(t){i("arzz")}Object.defineProperty(e,"__esModule",{value:!0});var o,l=i("7+uW"),r={name:"app"},c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},d=[],h={render:c,staticRenderFns:d},u=h,m=i("VU/8"),f=n,p=m(r,u,!1,f,null,null),g=p.exports,v=i("/ocq"),b=i("bOdI"),y=i.n(b),w=i("mvHQ"),x=i.n(w),_=(i("5W1q"),i("o4sT")),k=i.n(_),I=i("BO1k"),C=i.n(I),E={name:"TreeItem",props:{data:{type:Object,required:!0},wholeRow:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},height:{type:Number,default:24},parentItem:{type:Array},draggable:{type:Boolean,default:!1},onItemClick:{type:Function,default:function(){return!1}},onItemToggle:{type:Function,default:function(){return!1}},onItemDragStart:{type:Function,default:function(){return!1}},onItemDragEnd:{type:Function,default:function(){return!1}},onItemDrop:{type:Function,default:function(){return!1}},klass:String},data:function(){return{isHover:!1,isDragEnter:!1,model:this.data}},watch:{isDragEnter:function(t){this.$el.style.backgroundColor=t?"#C9FDC9":"inherit"},data:function(t){this.model=t},model:function(t){this.model=t}},computed:{isFolder:function(){return this.model.children&&this.model.children.length},classes:function(){return[{"tree-node":!0},{"tree-open":this.model.opened},{"tree-closed":!this.model.opened},{"tree-leaf":!this.isFolder},{"tree-loading":!!this.model.loading},{"tree-drag-enter":this.isDragEnter},y()({},this.klass,!!this.klass)]},anchorClasses:function(){return[{"tree-anchor":!0},{"tree-disabled":this.model.disabled},{"tree-selected":this.model.selected},{"tree-hovered":this.isHover}]},wholeRowClasses:function(){return[{"tree-wholerow":!0},{"tree-wholerow-clicked":this.model.selected},{"tree-wholerow-hovered":this.isHover}]},themeIconClasses:function(){return[{"tree-icon":!0},{"tree-themeicon":!0},y()({},this.model.icon,!!this.model.icon),{"tree-themeicon-custom":!!this.model.icon}]},isWholeRow:function(){if(this.wholeRow)return void 0===this.$parent.model||!0===this.$parent.model.opened}},methods:{handleRecursionNodeParents:function(t,e){t.$parent&&(e(t.$parent),this.handleRecursionNodeParents(t.$parent,e))},handleItemToggle:function(){this.isFolder&&(this.model.opened=!this.model.opened,this.onItemToggle(this,this.model),this.handleSetGroupMaxHeight())},handleGroupMaxHeight:function(){var t=0,e=0;if(this.model.opened){t=this.$children.length;var i=!0,n=!1,a=void 0;try{for(var s,o=C()(this.$children);!(i=(s=o.next()).done);i=!0){e+=s.value.handleGroupMaxHeight()}}catch(t){n=!0,a=t}finally{try{!i&&o.return&&o.return()}finally{if(n)throw a}}}return t*this.height+e},handleSetGroupMaxHeight:function(){var t=this;this.$refs.group&&(this.$refs.group.style.maxHeight=this.handleGroupMaxHeight()+"px");var e=this;this.$nextTick(function(){t.handleRecursionNodeParents(e,function(t){t.$refs.group&&(t.$refs.group.style.maxHeight=t.handleGroupMaxHeight()+"px")})})},handleItemClick:function(){this.model.disabled||(this.model.selected=!this.model.selected,this.onItemClick(this,this.model))},handleItemDrop:function(t,e,i){this.$el.style.backgroundColor="inherit",this.onItemDrop(t,e,i)}},mounted:function(){this.handleSetGroupMaxHeight()}},D=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{class:t.classes,attrs:{role:"treeitem",draggable:t.draggable},on:{dragstart:function(e){e.stopPropagation(),t.onItemDragStart(e,t._self,t._self.model)},dragend:function(e){e.stopPropagation(),e.preventDefault(),t.onItemDragEnd(e,t._self,t._self.model)},dragover:function(t){t.stopPropagation(),t.preventDefault()},dragenter:function(e){e.stopPropagation(),e.preventDefault(),t.isDragEnter=!0},dragleave:function(e){e.stopPropagation(),e.preventDefault(),t.isDragEnter=!1},drop:function(e){e.stopPropagation(),e.preventDefault(),t.handleItemDrop(e,t._self,t._self.model)}}},[t.isWholeRow?i("div",{class:t.wholeRowClasses,attrs:{role:"presentation"}},[t._v(" ")]):t._e(),t._v(" "),i("i",{staticClass:"tree-icon tree-ocl",attrs:{role:"presentation"},on:{click:t.handleItemToggle}}),t._v(" "),i("div",{class:t.anchorClasses,on:{click:t.handleItemClick,mouseover:function(e){t.isHover=!0},mouseout:function(e){t.isHover=!1}}},[t.showCheckbox&&!t.model.loading?i("i",{staticClass:"tree-icon tree-checkbox",attrs:{role:"presentation"}}):t._e(),t._v(" "),t.model.loading?t._e():i("i",{class:t.themeIconClasses,attrs:{role:"presentation"}}),t._v("\n        "+t._s(t.model.text)+"\n    ")]),t._v(" "),t.isFolder?i("ul",{ref:"group",staticClass:"tree-children",attrs:{role:"group"}},t._l(t.model.children,function(e,n){return i("tree-item",{key:n,attrs:{data:e,"whole-row":t.wholeRow,"show-checkbox":t.showCheckbox,height:t.height,"parent-item":t.model.children,draggable:t.draggable,"on-item-click":t.onItemClick,"on-item-toggle":t.onItemToggle,"on-item-drag-start":t.onItemDragStart,"on-item-drag-end":t.onItemDragEnd,"on-item-drop":t.onItemDrop}})})):t._e()])},z=[],$={render:D,staticRenderFns:z},P=$,N=i("VU/8"),T=N(E,P,!1,null,null,null),S=T.exports,F=0,R={name:"VJstree",props:{data:{type:Array},size:{type:String,validator:function(t){return["large","small"].indexOf(t)>-1}},showCheckbox:{type:Boolean,default:!1},wholeRow:{type:Boolean,default:!1},noDots:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},allowBatch:{type:Boolean,default:!1},textFieldName:{type:String,default:"text"},valueFieldName:{type:String,default:"value"},async:{type:Function},loadingText:{type:String,default:"Loading..."},draggable:{type:Boolean,default:!1},klass:String},data:function(){return{draggedItem:null,lastNode:null}},computed:{classes:function(){return[{tree:!0},{"tree-default":!this.size},y()({},"tree-default-"+this.size,!!this.size),{"tree-checkbox-selection":!!this.showCheckbox},y()({},this.klass,!!this.klass)]},containerClasses:function(){return[{"tree-container-ul":!0},{"tree-children":!0},{"tree-wholerow-ul":!!this.wholeRow},{"tree-no-dots":!!this.noDots}]},sizeHight:function(){switch(this.size){case"large":return 32;case"small":return 18;default:return 24}}},methods:{initializeData:function(t){if(t&&t.length>0)for(var e in t){var i=this.initializeDataItem(t[e]);t[e]=i,this.initializeData(t[e].children)}},initializeDataItem:function(t){function e(t,e,i){this.id=t.id||F++,this[e]=t[e]||"",this[i]=t[i]||t[e],this.icon=t.icon||"",this.opened=t.opened||!1,this.selected=t.selected||!1,this.disabled=t.disabled||!1,this.loading=t.loading||!1,this.children=t.children||[]}return new e(t,this.textFieldName,this.valueFieldName)},initializeLoading:function(){var t={};return t[this.textFieldName]=this.loadingText,t.disabled=!0,t.loading=!0,this.initializeDataItem(t)},handleRecursionNodeChilds:function(t,e){if(t.$children&&t.$children.length>0){var i=!0,n=!1,a=void 0;try{for(var s,o=C()(t.$children);!(i=(s=o.next()).done);i=!0){var l=s.value;l.disabled||(e(l),this.handleRecursionNodeChilds(l,e))}}catch(t){n=!0,a=t}finally{try{!i&&o.return&&o.return()}finally{if(n)throw a}}}},onItemClick:function(t,e){this.multiple?this.allowBatch&&this.handleBatchSelectItems(t,e):this.handleSingleSelectItems(t,e),this.$emit("item-click",t,e)},handleSingleSelectItems:function(t,e){this.lastNode&&(this.lastNode.model.selected=!1,this.lastNode.$el.children[0].classList.remove("tree-wholerow-clicked")),t.model.selected=!0,this.lastNode=t},handleBatchSelectItems:function(t,e){this.handleRecursionNodeChilds(t,function(e){e.model.disabled||(e.model.selected=t.model.selected)})},onItemToggle:function(t,e){t.model.opened&&this.handleAsyncLoad(t.model.children,t,e)},handleAsyncLoad:function(t,e,i){var n=this;this.async&&t[0].loading&&this.async(e,function(i){if(i.length>0)for(var a in i){i[a].children=[n.initializeLoading()];var s=n.initializeDataItem(i[a]);n.$set(t,a,s)}else e.model.children=[]})},onItemDragStart:function(t,e,i){if(!this.draggable)return!1;t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text",null),this.draggedItem={item:i,parentItem:e.parentItem,index:e.parentItem.indexOf(i)}},onItemDragEnd:function(t,e,i){if(!this.draggable)return!1;this.draggedItem=null},onItemDrop:function(t,e,i){if(!this.draggable)return!1;if(this.draggedItem){if(this.draggedItem.parentItem===i.children||this.draggedItem.item===i||i.children&&-1!==i.children.indexOf(this.draggedItem.item))return;i.children=i.children?i.children.concat(this.draggedItem.item):[this.draggedItem.item];var n=this;this.$nextTick(function(){n.draggedItem.parentItem.splice(n.draggedItem.index,1)})}}},created:function(){this.initializeData(this.data)},mounted:function(){this.async&&(this.$set(this.data,0,this.initializeLoading()),this.handleAsyncLoad(this.data,this))},components:{TreeItem:S}},H=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.classes,attrs:{role:"tree",onselectstart:"return false"}},[i("ul",{class:t.containerClasses,attrs:{role:"group"}},t._l(t.data,function(e,n){return i("tree-item",{key:n,attrs:{data:e,"whole-row":t.wholeRow,"show-checkbox":t.showCheckbox,height:t.sizeHight,"parent-item":t.data,draggable:t.draggable,"on-item-click":t.onItemClick,"on-item-toggle":t.onItemToggle,"on-item-drag-start":t.onItemDragStart,"on-item-drag-end":t.onItemDragEnd,"on-item-drop":t.onItemDrop,klass:n===t.data.length-1?"tree-last":""}})}))])},U=[],B={render:H,staticRenderFns:U},j=B,L=i("VU/8"),M=a,O=L(R,j,!1,M,null,null),V=O.exports,J=i("SOu3"),A=i.n(J),W=i("xrTZ"),q=(o={name:"HelloWorld",data:function(){return{filePath:"/",eventJson:x()({event:{uri:"",data:{}}},null,"\t"),showEventEdit:!1,eventName:"",eventList:[{id:1,name:"事件1"},{id:2,name:"事件1"},{id:3,name:"事件1"},{id:4,name:"事件1"},{id:5,name:"事件1"},{id:6,name:"事件1"},{id:7,name:"事件1"}],dialogFormVisible:!1,formLabelWidth:"500px",sysTime:"2017-11-11 00:00:00",editable:!1,isPackUp:!1,mriUrl:"http://sibbay-mri-wept.oss-cn-hangzhou.aliyuncs.com/#!pages/mri-and-menu/mri/mri?userid=000000000000000000000001&server_url=http://101.37.115.57:19999",gitUrl:"https://api.github.com/repos/NiuShy/editor/contents/",json:"",treeData:[],cities:[{value:"000000001",label:"测试用户01"},{value:"000000002",label:"测试用户01"},{value:"000000001000000001000000001",label:"测试用户01"},{value:"000000003",label:"测试用户01"},{value:"000000004",label:"测试用户01"},{value:"000000005",label:"测试用户01"}],value6:"000000005"}},mounted:function(){this.list=this.states.map(function(t){return{value:t,label:t}})},methods:{editFile:function(t){var e,i=this,n=this,a=" ",s="",o="编辑",l="",r="";if(1==t)o="新增",a=n.filePath.substring(0,n.filePath.lastIndexOf("/")+1),e=/^\/{0,1}\w+(\/\w+)*(\.json){0,1}$/,l="文件名或文件夹名不正确:/path/file.ext,/path/subPath",r="文件名或文件夹名:/path/file.ext,/path/subPath";else{if(""==n.filePath||"/"==n.filePath)return void this.$message({type:"warning",message:"请选择一个文件或文件夹"});if(a=n.filePath.substring(0,n.filePath.lastIndexOf("/")+1),"/"==n.filePath.charAt(n.filePath.length-1)){var c=n.filePath.substring(0,n.filePath.length-1);s=c.substring(c.lastIndexOf("/")+1),e=/^\w+$/,l="文件夹名称不正确，只能是数字字母下划线的组合",r="文件夹名称，只能是数字字母下划线的组合"}else s=n.filePath.substring(n.filePath.lastIndexOf("/")+1),e=/^\w+\.json$/,l="文件名称不正确，只能是数字字母下划线的组合并以.json结尾",r="文件名称，fileName.json"}a=a,this.$prompt(a,o,{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:e,inputErrorMessage:l,inputPlaceholder:r,inputValue:s}).then(function(t){var e=t.value;i.$message({type:"success",message:e})}).catch(function(){i.$message({type:"success",message:"取消"})})},deleteFile:function(){var t=this;this.$confirm("确定要删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$message({type:"success",message:"删除成功!"})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},packUp:function(){this.isPackUp=!this.isPackUp},remoteMethod:function(t){var e=this;""!==t?(this.loading=!0,setTimeout(function(){e.loading=!1,e.options4=e.list.filter(function(e){return e.label.toLowerCase().indexOf(t.toLowerCase())>-1})},200)):this.options4=[]},initEditor:function(t){i("NbQv"),i("eKfU")},itemClick:function(t,e){this.loadTreeNode(t,e)},loadTreeNode:function(t,e){var i=this;e?(i.filePath="/"+e.path+("dir"==e.type?"/":""),i.axios.get(i.gitUrl+e.path).then(function(t){if(t.data)if("dir"==e.type){var n=t.data.map(function(t){return t.text=t.name,t.icon="fa fa-folder-o","file"==t.type&&(t.icon="fa fa-file-text-o"),t.opened=!0,t});i.$set(e,"children",n)}else i.json=W.Base64.decode(t.data.content),i.$set(e,"content",i.json)}).catch(function(){i.$message({type:"info",message:"github api 访问超限"})})):i.axios.get(i.gitUrl).then(function(t){var e=t.data.map(function(t){return t.text=t.name,t.icon="fa fa-folder-o","file"==t.type&&(t.icon="fa fa-file-text-o"),t.opened=!0,t});i.treeData=e}).catch(function(t){alert(t)})}}},y()(o,"mounted",function(){A()(["#tree","#editor"],{sizes:[25,75]}),this.loadTreeNode()}),y()(o,"components",{VJstree:V,JsonEditor:k.a}),o),G=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mri-warp"},[i("div",{staticClass:"content-head"},[i("div",{staticClass:"head-left"},[i("el-select",{staticStyle:{width:"calc(100% - 180px)",padding:"3px"},attrs:{placeholder:"请选择",size:"small"},model:{value:t.value6,callback:function(e){t.value6=e},expression:"value6"}},t._l(t.cities,function(e){return i("el-option",{key:e.value,staticStyle:{height:"50px"},attrs:{label:e.label,value:e.value}},[i("span",[t._v(t._s(e.label))]),i("br"),t._v(" "),i("span",{staticStyle:{"font-size":"13px"}},[t._v(t._s(e.value))])])})),t._v(" "),i("el-button-group",{staticClass:"btns",staticStyle:{float:"right","padding-right":"15px"}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"停止",placement:"top-start"}},[i("el-button",{attrs:{type:"primary",size:"small"}},[i("i",{staticClass:"fa fa-stop"})])],1),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"启动",placement:"top-start"}},[i("el-button",{attrs:{type:"primary",size:"small"}},[i("i",{staticClass:"fa fa-play"})])],1),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"事件",placement:"top-start"}},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.dialogFormVisible=!0}}},[i("i",{staticClass:"fa fa-flash"})])],1),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"重载",placement:"top-start"}},[i("el-button",{attrs:{type:"primary",size:"small"}},[i("i",{staticClass:"fa fa-refresh"})])],1),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:t.isPackUp?"展开":"收起",placement:"top-start"}},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.packUp()}}},[i("i",{class:t.isPackUp?"el-icon-arrow-right":"el-icon-arrow-left"})])],1)],1)],1),t._v(" "),i("div",{staticClass:"head-right"},[i("label",[t._v(t._s(t.filePath))]),t._v(" "),i("el-button-group",{staticClass:"btns",staticStyle:{float:"right"}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"新建",placement:"top-start"}},[i("el-button",{attrs:{type:"primary",size:"small",icon:"plus"},on:{click:function(e){t.editFile(1)}}})],1),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"修改",placement:"top-start"}},[i("el-button",{attrs:{type:"primary",size:"small",icon:"edit"},on:{click:function(e){t.editFile(2)}}})],1),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"保存",placement:"top-start"}},[i("el-button",{attrs:{type:"primary",size:"small"}},[i("i",{staticClass:"fa fa-save"})])],1),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"删除",placement:"top-start"}},[i("el-button",{attrs:{type:"primary",size:"small",icon:"delete"},on:{click:function(e){t.deleteFile(2)}}})],1)],1)],1)]),t._v(" "),i("div",{staticClass:"mri-content"},[i("transition",{attrs:{name:"slide"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isPackUp,expression:"!isPackUp"}],staticClass:"mri-view",attrs:{id:"mri",transiton:"slide"}},[i("iframe",{staticStyle:{width:"100%",height:"100%",border:"none"},attrs:{src:t.mriUrl}})])]),t._v(" "),i("div",{staticClass:"tree-view",attrs:{id:"tree"}},[i("v-jstree",{ref:"tree",attrs:{data:t.treeData,wholeRow:""},on:{"item-click":t.itemClick}})],1),t._v(" "),i("div",{staticClass:"editor-view",attrs:{id:"editor"}},[i("json-editor",{attrs:{height:"100%",lang:"json",theme:"monokai"},on:{init:t.initEditor},model:{value:t.json,callback:function(e){t.json=e},expression:"json"}})],1)],1),t._v(" "),i("div",{staticClass:"content-head"},[i("div",{staticClass:"head-left"},[i("el-date-picker",{staticClass:"sys-time",attrs:{type:"datetime",editable:t.editable,placeholder:"选择日期时间"},model:{value:t.sysTime,callback:function(e){t.sysTime=e},expression:"sysTime"}}),t._v(" "),i("label",{staticClass:"version"},[t._v("V1.0 ")])],1),t._v(" "),i("div",{staticClass:"head-right"})]),t._v(" "),i("el-dialog",{attrs:{title:"事件",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-button",{staticStyle:{float:"right","margin-bottom":"10px"},attrs:{type:"primary"},on:{click:function(e){t.showEventEdit=!0}}},[t._v("添加事件")]),t._v(" "),i("el-table",{directives:[{name:"show",rawName:"v-show",value:!t.showEventEdit,expression:"!showEventEdit"}],attrs:{data:t.eventList}},[i("el-table-column",{attrs:{property:"name",label:"事件名称"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"small",icon:"caret-left"}},[t._v("发送")]),t._v(" "),i("el-button",{attrs:{size:"small",icon:"edit"},on:{click:function(e){t.showEventEdit=!0}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"danger",icon:"delete"}},[t._v("删除")])]}}])})],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showEventEdit,expression:"showEventEdit"}]},[i("el-input",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"请输入事件名称"},model:{value:t.eventName,callback:function(e){t.eventName=e},expression:"eventName"}}),t._v(" "),i("json-editor",{attrs:{height:"200px",lang:"json",theme:"monokai"},on:{init:t.initEditor},model:{value:t.eventJson,callback:function(e){t.eventJson=e},expression:"eventJson"}})],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showEventEdit,expression:"showEventEdit"}],staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.showEventEdit=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showEventEdit=!1}}},[t._v("确 定")])],1)],1)],1)},Q=[],K={render:G,staticRenderFns:Q},Z=K,X=i("VU/8"),Y=s,tt=X(q,Z,!1,Y,null,null),et=tt.exports;l.default.use(v.a);var it=new v.a({routes:[{path:"/",name:"MRIEditor",component:et}]}),nt=i("mtWM"),at=i.n(nt),st=i("zL8q"),ot=i.n(st);i("q8zI");l.default.prototype.axios=at.a,l.default.config.productionTip=!1,l.default.use(ot.a),new l.default({el:"#app",router:it,template:"<App/>",components:{App:g}})},arzz:function(t,e){},cFgJ:function(t,e){},q8zI:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.11e6ad5e66899c9379cb.js.map
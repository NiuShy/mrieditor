webpackJsonp([2],{"1pTi":function(e,t){},"3+rP":function(e,t){},"5W1q":function(e,t){},NHnr:function(e,t,i){"use strict";function n(e){i("cFgJ")}function a(e){i("1pTi")}function s(e){i("3+rP")}Object.defineProperty(t,"__esModule",{value:!0});var o,l=i("7+uW"),r={name:"app"},c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},d=[],h={render:c,staticRenderFns:d},u=h,m=i("VU/8"),f=n,p=m(r,u,!1,f,null,null),g=p.exports,v=i("/ocq"),y=i("bOdI"),b=i.n(y),w=i("mvHQ"),x=i.n(w),_=(i("5W1q"),i("o4sT")),k=i.n(_),I=i("BO1k"),C=i.n(I),E={name:"TreeItem",props:{data:{type:Object,required:!0},wholeRow:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},height:{type:Number,default:24},parentItem:{type:Array},draggable:{type:Boolean,default:!1},onItemClick:{type:Function,default:function(){return!1}},onItemToggle:{type:Function,default:function(){return!1}},onItemDragStart:{type:Function,default:function(){return!1}},onItemDragEnd:{type:Function,default:function(){return!1}},onItemDrop:{type:Function,default:function(){return!1}},klass:String},data:function(){return{isHover:!1,isDragEnter:!1,model:this.data}},watch:{isDragEnter:function(e){this.$el.style.backgroundColor=e?"#C9FDC9":"inherit"},data:function(e){this.model=e},model:function(e){this.model=e}},computed:{isFolder:function(){return this.model.children&&this.model.children.length},classes:function(){return[{"tree-node":!0},{"tree-open":this.model.opened},{"tree-closed":!this.model.opened},{"tree-leaf":!this.isFolder},{"tree-loading":!!this.model.loading},{"tree-drag-enter":this.isDragEnter},b()({},this.klass,!!this.klass)]},anchorClasses:function(){return[{"tree-anchor":!0},{"tree-disabled":this.model.disabled},{"tree-selected":this.model.selected},{"tree-hovered":this.isHover}]},wholeRowClasses:function(){return[{"tree-wholerow":!0},{"tree-wholerow-clicked":this.model.selected},{"tree-wholerow-hovered":this.isHover}]},themeIconClasses:function(){return[{"tree-icon":!0},{"tree-themeicon":!0},b()({},this.model.icon,!!this.model.icon),{"tree-themeicon-custom":!!this.model.icon}]},isWholeRow:function(){if(this.wholeRow)return void 0===this.$parent.model||!0===this.$parent.model.opened}},methods:{handleRecursionNodeParents:function(e,t){e.$parent&&(t(e.$parent),this.handleRecursionNodeParents(e.$parent,t))},handleItemToggle:function(){this.isFolder&&(this.model.opened=!this.model.opened,this.onItemToggle(this,this.model),this.handleSetGroupMaxHeight())},handleGroupMaxHeight:function(){var e=0,t=0;if(this.model.opened){e=this.$children.length;var i=!0,n=!1,a=void 0;try{for(var s,o=C()(this.$children);!(i=(s=o.next()).done);i=!0){t+=s.value.handleGroupMaxHeight()}}catch(e){n=!0,a=e}finally{try{!i&&o.return&&o.return()}finally{if(n)throw a}}}return e*this.height+t},handleSetGroupMaxHeight:function(){var e=this;this.$refs.group&&(this.$refs.group.style.maxHeight=this.handleGroupMaxHeight()+"px");var t=this;this.$nextTick(function(){e.handleRecursionNodeParents(t,function(e){e.$refs.group&&(e.$refs.group.style.maxHeight=e.handleGroupMaxHeight()+"px")})})},handleItemClick:function(){this.model.disabled||(this.model.selected=!this.model.selected,this.onItemClick(this,this.model))},handleItemDrop:function(e,t,i){this.$el.style.backgroundColor="inherit",this.onItemDrop(e,t,i)}},mounted:function(){this.handleSetGroupMaxHeight()}},D=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{class:e.classes,attrs:{role:"treeitem",draggable:e.draggable},on:{dragstart:function(t){t.stopPropagation(),e.onItemDragStart(t,e._self,e._self.model)},dragend:function(t){t.stopPropagation(),t.preventDefault(),e.onItemDragEnd(t,e._self,e._self.model)},dragover:function(e){e.stopPropagation(),e.preventDefault()},dragenter:function(t){t.stopPropagation(),t.preventDefault(),e.isDragEnter=!0},dragleave:function(t){t.stopPropagation(),t.preventDefault(),e.isDragEnter=!1},drop:function(t){t.stopPropagation(),t.preventDefault(),e.handleItemDrop(t,e._self,e._self.model)}}},[e.isWholeRow?i("div",{class:e.wholeRowClasses,attrs:{role:"presentation"}},[e._v(" ")]):e._e(),e._v(" "),i("i",{staticClass:"tree-icon tree-ocl",attrs:{role:"presentation"},on:{click:e.handleItemToggle}}),e._v(" "),i("div",{class:e.anchorClasses,on:{click:e.handleItemClick,mouseover:function(t){e.isHover=!0},mouseout:function(t){e.isHover=!1}}},[e.showCheckbox&&!e.model.loading?i("i",{staticClass:"tree-icon tree-checkbox",attrs:{role:"presentation"}}):e._e(),e._v(" "),e.model.loading?e._e():i("i",{class:e.themeIconClasses,attrs:{role:"presentation"}}),e._v("\n        "+e._s(e.model.text)+"\n    ")]),e._v(" "),e.isFolder?i("ul",{ref:"group",staticClass:"tree-children",attrs:{role:"group"}},e._l(e.model.children,function(t,n){return i("tree-item",{key:n,attrs:{data:t,"whole-row":e.wholeRow,"show-checkbox":e.showCheckbox,height:e.height,"parent-item":e.model.children,draggable:e.draggable,"on-item-click":e.onItemClick,"on-item-toggle":e.onItemToggle,"on-item-drag-start":e.onItemDragStart,"on-item-drag-end":e.onItemDragEnd,"on-item-drop":e.onItemDrop}})})):e._e()])},$=[],z={render:D,staticRenderFns:$},N=z,T=i("VU/8"),F=T(E,N,!1,null,null,null),P=F.exports,S=0,R={name:"VJstree",props:{data:{type:Array},size:{type:String,validator:function(e){return["large","small"].indexOf(e)>-1}},showCheckbox:{type:Boolean,default:!1},wholeRow:{type:Boolean,default:!1},noDots:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},allowBatch:{type:Boolean,default:!1},textFieldName:{type:String,default:"text"},valueFieldName:{type:String,default:"value"},async:{type:Function},loadingText:{type:String,default:"Loading..."},draggable:{type:Boolean,default:!1},klass:String},data:function(){return{draggedItem:null,lastNode:null}},computed:{classes:function(){return[{tree:!0},{"tree-default":!this.size},b()({},"tree-default-"+this.size,!!this.size),{"tree-checkbox-selection":!!this.showCheckbox},b()({},this.klass,!!this.klass)]},containerClasses:function(){return[{"tree-container-ul":!0},{"tree-children":!0},{"tree-wholerow-ul":!!this.wholeRow},{"tree-no-dots":!!this.noDots}]},sizeHight:function(){switch(this.size){case"large":return 32;case"small":return 18;default:return 24}}},methods:{initializeData:function(e){if(e&&e.length>0)for(var t in e){var i=this.initializeDataItem(e[t]);e[t]=i,this.initializeData(e[t].children)}},initializeDataItem:function(e){function t(e,t,i){this.id=e.id||S++,this[t]=e[t]||"",this[i]=e[i]||e[t],this.icon=e.icon||"",this.opened=e.opened||!1,this.selected=e.selected||!1,this.disabled=e.disabled||!1,this.loading=e.loading||!1,this.children=e.children||[]}return new t(e,this.textFieldName,this.valueFieldName)},initializeLoading:function(){var e={};return e[this.textFieldName]=this.loadingText,e.disabled=!0,e.loading=!0,this.initializeDataItem(e)},handleRecursionNodeChilds:function(e,t){if(e.$children&&e.$children.length>0){var i=!0,n=!1,a=void 0;try{for(var s,o=C()(e.$children);!(i=(s=o.next()).done);i=!0){var l=s.value;l.disabled||(t(l),this.handleRecursionNodeChilds(l,t))}}catch(e){n=!0,a=e}finally{try{!i&&o.return&&o.return()}finally{if(n)throw a}}}},onItemClick:function(e,t){this.multiple?this.allowBatch&&this.handleBatchSelectItems(e,t):this.handleSingleSelectItems(e,t),this.$emit("item-click",e,t)},handleSingleSelectItems:function(e,t){this.lastNode&&(this.lastNode.model.selected=!1,this.lastNode.$el.children[0].classList.remove("tree-wholerow-clicked")),e.model.selected=!0,this.lastNode=e},handleBatchSelectItems:function(e,t){this.handleRecursionNodeChilds(e,function(t){t.model.disabled||(t.model.selected=e.model.selected)})},onItemToggle:function(e,t){e.model.opened&&this.handleAsyncLoad(e.model.children,e,t)},handleAsyncLoad:function(e,t,i){var n=this;this.async&&e[0].loading&&this.async(t,function(i){if(i.length>0)for(var a in i){i[a].children=[n.initializeLoading()];var s=n.initializeDataItem(i[a]);n.$set(e,a,s)}else t.model.children=[]})},onItemDragStart:function(e,t,i){if(!this.draggable)return!1;e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text",null),this.draggedItem={item:i,parentItem:t.parentItem,index:t.parentItem.indexOf(i)}},onItemDragEnd:function(e,t,i){if(!this.draggable)return!1;this.draggedItem=null},onItemDrop:function(e,t,i){if(!this.draggable)return!1;if(this.draggedItem){if(this.draggedItem.parentItem===i.children||this.draggedItem.item===i||i.children&&-1!==i.children.indexOf(this.draggedItem.item))return;i.children=i.children?i.children.concat(this.draggedItem.item):[this.draggedItem.item];var n=this;this.$nextTick(function(){n.draggedItem.parentItem.splice(n.draggedItem.index,1)})}}},created:function(){this.initializeData(this.data)},mounted:function(){this.async&&(this.$set(this.data,0,this.initializeLoading()),this.handleAsyncLoad(this.data,this))},components:{TreeItem:P}},H=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:e.classes,attrs:{role:"tree",onselectstart:"return false"}},[i("ul",{class:e.containerClasses,attrs:{role:"group"}},e._l(e.data,function(t,n){return i("tree-item",{key:n,attrs:{data:t,"whole-row":e.wholeRow,"show-checkbox":e.showCheckbox,height:e.sizeHight,"parent-item":e.data,draggable:e.draggable,"on-item-click":e.onItemClick,"on-item-toggle":e.onItemToggle,"on-item-drag-start":e.onItemDragStart,"on-item-drag-end":e.onItemDragEnd,"on-item-drop":e.onItemDrop,klass:n===e.data.length-1?"tree-last":""}})}))])},B=[],U={render:H,staticRenderFns:B},L=U,j=i("VU/8"),M=a,O=j(R,L,!1,M,null,null),V=O.exports,J=i("SOu3"),A=i.n(J),W=i("xrTZ"),q=(o={name:"HelloWorld",data:function(){return{filePath:"/",eventJson:x()({event:{uri:"",data:{}}},null,"\t"),showEventEdit:!1,eventName:"",eventList:[{id:1,name:"事件1"},{id:2,name:"事件1"},{id:3,name:"事件1"},{id:4,name:"事件1"},{id:5,name:"事件1"},{id:6,name:"事件1"},{id:7,name:"事件1"}],dialogFormVisible:!1,formLabelWidth:"500px",sysTime:"2017-11-11 00:00:00",editable:!1,isPackUp:!1,mriUrl:"http://sibbay-mri-wept.oss-cn-hangzhou.aliyuncs.com/#!pages/mri-and-menu/mri/mri?userid=000000000000000000000001&server_url=http://101.37.115.57:19999",gitUrl:"https://api.github.com/repos/NiuShy/editor/contents/",json:"",treeData:[],cities:[{value:"000000001",label:"测试用户01"},{value:"000000002",label:"测试用户01"},{value:"000000001000000001000000001",label:"测试用户01"},{value:"000000003",label:"测试用户01"},{value:"000000004",label:"测试用户01"},{value:"000000005",label:"测试用户01"}],value6:"000000005"}},mounted:function(){this.list=this.states.map(function(e){return{value:e,label:e}})},methods:{editFile:function(e){var t=this,i=this,n=" ",a="",s="编辑";if(1==e)s="新增",n=i.filePath.substring(0,i.filePath.lastIndexOf("/")+1);else{if(""==i.filePath||"/"==i.filePath)return void this.$message({type:"warning",message:"请选择一个文件或文件夹"});n=i.filePath.substring(0,i.filePath.lastIndexOf("/")+1),a=i.filePath.substring(i.filePath.lastIndexOf("/")+1)}this.$prompt(n,s,{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^[a-zA-Z0-9\._!@#$%^&*~\u4e00-\u9fa5]+$/,inputErrorMessage:"名称格式不正确",inputValue:a}).then(function(e){var i=e.value;t.$message({type:"success",message:i})}).catch(function(){t.$message({type:"success",message:"取消"})})},deleteFile:function(){var e=this;this.$confirm("确定要删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message({type:"success",message:"删除成功!"})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},packUp:function(){this.isPackUp=!this.isPackUp},remoteMethod:function(e){var t=this;""!==e?(this.loading=!0,setTimeout(function(){t.loading=!1,t.options4=t.list.filter(function(t){return t.label.toLowerCase().indexOf(e.toLowerCase())>-1})},200)):this.options4=[]},initEditor:function(e){i("NbQv"),i("eKfU")},itemClick:function(e,t){this.loadTreeNode(e,t)},loadTreeNode:function(e,t){var i=this;t?(i.filePath="/"+t.path+("dir"==t.type?"/":""),i.axios.get(i.gitUrl+t.path).then(function(e){if(e.data)if("dir"==t.type){var n=e.data.map(function(e){return e.text=e.name,e.icon="fa fa-folder-o","file"==e.type&&(e.icon="fa fa-file-text-o"),e.opened=!0,e});i.$set(t,"children",n)}else i.json=W.Base64.decode(e.data.content),i.$set(t,"content",i.json)}).catch(function(){i.$message({type:"info",message:"github api 访问超限"})})):i.axios.get(i.gitUrl).then(function(e){var t=e.data.map(function(e){return e.text=e.name,e.icon="fa fa-folder-o","file"==e.type&&(e.icon="fa fa-file-text-o"),e.opened=!0,e});i.treeData=t}).catch(function(e){alert(e)})}}},b()(o,"mounted",function(){A()(["#tree","#editor"],{sizes:[25,75]}),this.loadTreeNode()}),b()(o,"components",{VJstree:V,JsonEditor:k.a}),o),G=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mri-warp"},[i("div",{staticClass:"content-head"},[i("div",{staticClass:"head-left"},[i("el-select",{staticStyle:{width:"calc(100% - 180px)",padding:"3px"},attrs:{placeholder:"请选择",size:"small"},model:{value:e.value6,callback:function(t){e.value6=t},expression:"value6"}},e._l(e.cities,function(t){return i("el-option",{key:t.value,staticStyle:{height:"50px"},attrs:{label:t.label,value:t.value}},[i("span",[e._v(e._s(t.label))]),i("br"),e._v(" "),i("span",{staticStyle:{"font-size":"13px"}},[e._v(e._s(t.value))])])})),e._v(" "),i("el-button-group",{staticClass:"btns",staticStyle:{float:"right","padding-right":"15px"}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"停止",placement:"top-start"}},[i("el-button",{attrs:{type:"primary",size:"small"}},[i("i",{staticClass:"fa fa-stop"})])],1),e._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"启动",placement:"top-start"}},[i("el-button",{attrs:{type:"primary",size:"small"}},[i("i",{staticClass:"fa fa-play"})])],1),e._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"事件",placement:"top-start"}},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.dialogFormVisible=!0}}},[i("i",{staticClass:"fa fa-flash"})])],1),e._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"重载",placement:"top-start"}},[i("el-button",{attrs:{type:"primary",size:"small"}},[i("i",{staticClass:"fa fa-refresh"})])],1),e._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.isPackUp?"展开":"收起",placement:"top-start"}},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.packUp()}}},[i("i",{class:e.isPackUp?"el-icon-arrow-right":"el-icon-arrow-left"})])],1)],1)],1),e._v(" "),i("div",{staticClass:"head-right"},[i("label",[e._v(e._s(e.filePath))]),e._v(" "),i("el-button-group",{staticClass:"btns",staticStyle:{float:"right"}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"新建",placement:"top-start"}},[i("el-button",{attrs:{type:"primary",size:"small",icon:"plus"},on:{click:function(t){e.editFile(1)}}})],1),e._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"修改",placement:"top-start"}},[i("el-button",{attrs:{type:"primary",size:"small",icon:"edit"},on:{click:function(t){e.editFile(2)}}})],1),e._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"保存",placement:"top-start"}},[i("el-button",{attrs:{type:"primary",size:"small"}},[i("i",{staticClass:"fa fa-save"})])],1),e._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"删除",placement:"top-start"}},[i("el-button",{attrs:{type:"primary",size:"small",icon:"delete"},on:{click:function(t){e.deleteFile(2)}}})],1)],1)],1)]),e._v(" "),i("div",{staticClass:"mri-content"},[i("transition",{attrs:{name:"slide"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isPackUp,expression:"!isPackUp"}],staticClass:"mri-view",attrs:{id:"mri",transiton:"slide"}},[i("iframe",{staticStyle:{width:"100%",height:"100%",border:"none"},attrs:{src:e.mriUrl}})])]),e._v(" "),i("div",{staticClass:"tree-view",attrs:{id:"tree"}},[i("v-jstree",{ref:"tree",attrs:{data:e.treeData,wholeRow:""},on:{"item-click":e.itemClick}})],1),e._v(" "),i("div",{staticClass:"editor-view",attrs:{id:"editor"}},[i("json-editor",{attrs:{height:"100%",lang:"json",theme:"monokai"},on:{init:e.initEditor},model:{value:e.json,callback:function(t){e.json=t},expression:"json"}})],1)],1),e._v(" "),i("div",{staticClass:"content-head"},[i("div",{staticClass:"head-left"},[i("el-date-picker",{staticClass:"sys-time",attrs:{type:"datetime",editable:e.editable,placeholder:"选择日期时间"},model:{value:e.sysTime,callback:function(t){e.sysTime=t},expression:"sysTime"}}),e._v(" "),i("label",{staticClass:"version"},[e._v("V1.0 ")])],1),e._v(" "),i("div",{staticClass:"head-right"})]),e._v(" "),i("el-dialog",{attrs:{title:"事件",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-button",{staticStyle:{float:"right","margin-bottom":"10px"},attrs:{type:"primary"},on:{click:function(t){e.showEventEdit=!0}}},[e._v("添加事件")]),e._v(" "),i("el-table",{directives:[{name:"show",rawName:"v-show",value:!e.showEventEdit,expression:"!showEventEdit"}],attrs:{data:e.eventList}},[i("el-table-column",{attrs:{property:"name",label:"事件名称"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"small",icon:"caret-left"}},[e._v("发送")]),e._v(" "),i("el-button",{attrs:{size:"small",icon:"edit"},on:{click:function(t){e.showEventEdit=!0}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{size:"small",type:"danger",icon:"delete"}},[e._v("删除")])]}}])})],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showEventEdit,expression:"showEventEdit"}]},[i("el-input",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"请输入事件名称"},model:{value:e.eventName,callback:function(t){e.eventName=t},expression:"eventName"}}),e._v(" "),i("json-editor",{attrs:{height:"200px",lang:"json",theme:"monokai"},on:{init:e.initEditor},model:{value:e.eventJson,callback:function(t){e.eventJson=t},expression:"eventJson"}})],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showEventEdit,expression:"showEventEdit"}],staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.showEventEdit=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showEventEdit=!1}}},[e._v("确 定")])],1)],1)],1)},Q=[],Z={render:G,staticRenderFns:Q},K=Z,X=i("VU/8"),Y=s,ee=X(q,K,!1,Y,null,null),te=ee.exports;l.default.use(v.a);var ie=new v.a({routes:[{path:"/",name:"MRIEditor",component:te}]}),ne=i("mtWM"),ae=i.n(ne),se=i("zL8q"),oe=i.n(se);i("q8zI");l.default.prototype.axios=ae.a,l.default.config.productionTip=!1,l.default.use(oe.a),new l.default({el:"#app",router:ie,template:"<App/>",components:{App:g}})},cFgJ:function(e,t){},q8zI:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.73a1b9842ab0d5229595.js.map